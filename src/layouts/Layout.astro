---
import '../styles/global.css';
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>Milky Way</title>
  </head>
  <body data-theme="light">
    <div class="page">
      <header class="site-header">
        <div class="nav-bar">
          <a class="brand" href="/">Milky-Way</a>
          <nav class="nav-links">
            <a href="#about">About</a>
            <a href="#posts">Posts</a>
            <button type="button" id="themeToggle" class="toggle">Light / Dark</button>
          </nav>
        </div>
      </header>

      <main class="content">
        <slot />
      </main>

      <footer class="footer">
        <div class="footer-inner">
          <p>Â© 2025 Milky-Way. All rights reserved.</p>
          <div class="footer-icons">
            <a href="https://github.com" aria-label="GitHub" target="_blank" rel="noreferrer">
              <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path
                  d="M12 .5C5.37.5 0 5.87 0 12.52c0 5.3 3.44 9.8 8.2 11.4.6.12.82-.26.82-.58 0-.29-.01-1.06-.02-2.09-3.34.73-4.04-1.63-4.04-1.63-.55-1.4-1.35-1.77-1.35-1.77-1.1-.76.09-.75.09-.75 1.22.09 1.87 1.25 1.87 1.25 1.08 1.89 2.84 1.35 3.53 1.03.11-.78.42-1.35.76-1.66-2.67-.31-5.48-1.36-5.48-6.06 0-1.34.46-2.43 1.23-3.29-.13-.31-.54-1.56.12-3.24 0 0 1.01-.33 3.3 1.25.96-.27 1.98-.4 3-.4s2.04.13 3 .4c2.29-1.58 3.3-1.25 3.3-1.25.66 1.68.25 2.93.12 3.24.77.86 1.23 1.95 1.23 3.29 0 4.72-2.82 5.75-5.5 6.06.43.37.82 1.1.82 2.22 0 1.6-.02 2.89-.02 3.29 0 .32.22.71.83.58 4.75-1.59 8.2-6.1 8.2-11.4C24 5.87 18.63.5 12 .5Z"
                  fill="currentColor"
                />
              </svg>
            </a>
            <a href="mailto:hello@example.com" aria-label="Email">
              <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path
                  d="M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm0 2v.4l8 5.2 8-5.2V6H4Zm16 12V9.3l-7.43 4.83a1 1 0 0 1-1.14 0L4 9.3V18h16Z"
                  fill="currentColor"
                />
              </svg>
            </a>
          </div>
        </div>
      </footer>
    </div>

    <script>
      const storageKey = 'milky-way-theme';
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const savedTheme = localStorage.getItem(storageKey);
      const body = document.body;
      const applyTheme = (theme) => {
        body.dataset.theme = theme;
        localStorage.setItem(storageKey, theme);
      };
      applyTheme(savedTheme || (prefersDark ? 'dark' : 'light'));
      document.getElementById('themeToggle')?.addEventListener('click', () => {
        const next = body.dataset.theme === 'light' ? 'dark' : 'light';
        applyTheme(next);
      });
    </script>
  </body>
</html>

<style>
  :root {
    --bg: #f5e6f0;
    --panel: #ffffff;
    --text: #31253b;
    --muted: #6a4b76;
    --accent: #ef7ab8;
    --shadow: rgba(49, 37, 59, 0.12);
  }

  body[data-theme='dark'] {
    --bg: #1c1523;
    --panel: #2a1f31;
    --text: #f3eaf7;
    --muted: #cdb6d6;
    --accent: #ff8ad4;
    --shadow: rgba(0, 0, 0, 0.35);
  }

  html,
  body {
    margin: 0;
    padding: 0;
    width: 100%;
    min-height: 100%;
    background: var(--bg);
    color: var(--text);
    transition: background 0.3s ease, color 0.3s ease;
  }

  .page {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  .site-header {
    position: sticky;
    top: 0;
    z-index: 10;
    background: color-mix(in srgb, var(--bg) 90%, transparent);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
  }

  .nav-bar,
  .content,
  .footer-inner {
    width: min(1200px, 80vw);
    margin: 0 auto;
  }

  .nav-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 0;
    gap: 24px;
  }

  .brand {
    font-size: 1.4rem;
    font-weight: 700;
    text-decoration: none;
    color: var(--text);
    letter-spacing: 0.02em;
  }

  .nav-links {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .nav-links a {
    padding: 10px 14px;
    text-decoration: none;
    color: var(--text);
    border-radius: 12px;
    font-weight: 600;
    transition: background 0.2s ease, color 0.2s ease;
  }

  .nav-links a:hover {
    background: color-mix(in srgb, var(--accent) 12%, transparent);
  }

  .toggle {
    border: 1px solid color-mix(in srgb, var(--text) 18%, transparent);
    background: var(--panel);
    color: var(--text);
    border-radius: 12px;
    padding: 10px 14px;
    cursor: pointer;
    font-weight: 600;
    transition: transform 0.15s ease, box-shadow 0.2s ease;
    box-shadow: 0 10px 25px var(--shadow);
  }

  .toggle:hover {
    transform: translateY(-2px);
    box-shadow: 0 14px 30px var(--shadow);
  }

  main.content {
    padding: 48px 0 64px;
    flex: 1;
    width: min(1200px, 80vw);
  }

  .footer {
    padding: 28px 0 36px;
    background: color-mix(in srgb, var(--panel) 90%, transparent);
    border-top: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
  }

  .footer-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    color: var(--muted);
    text-align: center;
  }

  .footer-icons {
    display: flex;
    gap: 12px;
  }

  .footer-icons a {
    display: grid;
    place-items: center;
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background: var(--panel);
    color: var(--text);
    border: 1px solid color-mix(in srgb, var(--text) 12%, transparent);
    box-shadow: 0 10px 24px var(--shadow);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .footer-icons a:hover {
    transform: translateY(-3px);
    box-shadow: 0 16px 30px var(--shadow);
  }

  .footer-icons svg {
    width: 20px;
    height: 20px;
  }

  @media (max-width: 720px) {
    .nav-bar,
    .content,
    .footer-inner {
      width: 90vw;
    }

    .nav-links {
      gap: 8px;
    }

    .nav-links a,
    .toggle {
      padding: 8px 12px;
    }

    .footer-inner {
      flex-direction: column;
      align-items: center;
    }
  }
</style>
