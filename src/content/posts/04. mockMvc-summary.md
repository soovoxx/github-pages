---
title: "MockMvc 주요 메서드 정리"
slug: "mockMvc-method"
pubDate: "2025-12-10"
summary: "MockMvc-methods"
tags: ["spring", "mockMvc"]
---

# MockMvc 주요 메서드 정리

MockMvc는 **스프링 MVC 컨트롤러를 실제 서버 없이 테스트**할 수 있게 해주는 도구이며, 핵심은 아래 3가지 축으로 이해하면 된다.

## 1. perform() — 요청 보내기

테스트에서 **HTTP 요청을 실제로 보내는 역할**을 수행한다.

### 예시

```kotlin
mockMvc.perform(
    get("/players/1")
)
```

get(), post(), put(), delete() 같은 빌더로 요청을 만든다.

## **2. andExpect() — 응답 검증하기**

perform() 이후 이어서 **응답 검증**을 한다.

### **예시**

```kotlin
mockMvc.perform(get("/players/1"))
    .andExpect(status().isOk)
    .andExpect(jsonPath("$.name").value("김영웅"))
```

### **자주 쓰는 검증**

| **검증**     | **예시**                                            |
| ------------ | --------------------------------------------------- |
| HTTP 상태    | status().isOk, status().isBadRequest                |
| JSON 값      | jsonPath("$.age").value(20)                         |
| 헤더         | header().string("Content-Type", "application/json") |
| Content-Type | content().contentType(MediaType.APPLICATION_JSON)   |

## **3. andDo() — 로그 출력**

보통 테스트 중 **응답 로그를 출력**할 때 사용한다.

### **예시**

```kotlin
mockMvc.perform(get("/players/1"))
    .andDo(print())
```

## **4. HTTP Request Builders (get/post/put/delete)**

MockMvc 핵심은 아니지만 필수이므로 함께 정리한다.

### **GET**

```kotlin
get("/players")
```

### **POST + JSON Body**

```kotlin
post("/players")
    .content(objectMapper.writeValueAsString(req))
    .contentType(MediaType.APPLICATION_JSON)
```

### **Query Param**

```kotlin
get("/search")
    .param("name", "정수")
    .param("grade", "A")
```

## **5. andReturn() — 응답 직접 받기**

응답의 body를 직접 꺼내서 사용할 때 유용하다.

### **예시**

```kotlin
val result = mockMvc.perform(get("/players/1"))
    .andExpect(status().isOk)
    .andReturn()

val json = result.response.contentAsString
println(json)
```

## **6. MockMvcResultMatchers**

status(), jsonPath(), content() 등 검증 도우미들이 들어있는 클래스.

## **7. 전체 예시**

```java
@Test
fun `선수 상세 조회 성공`() {
    mockMvc.perform(
        get("/players/{id}", 1)
            .accept(MediaType.APPLICATION_JSON)
    )
        .andExpect(status().isOk)
        .andExpect(jsonPath("$.name").value("김영웅"))
        .andExpect(jsonPath("$.position").value("P"))
        .andDo(print())
}
```

## **요약**

| **메서드**                            | **역할**       |
| ------------------------------------- | -------------- |
| **perform()**                         | 요청 실행      |
| **andExpect()**                       | 응답 검증      |
| **andDo()**                           | 로그 출력      |
| **andReturn()**                       | 응답 직접 반환 |
| **get/post/put/delete()**             | 요청 생성      |
| **jsonPath() / status() / content()** | 검증 도우미    |
